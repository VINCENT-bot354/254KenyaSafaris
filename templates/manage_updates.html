{% extends "admin_base.html" %}

{% block content %}
<h1>Manage Updates</h1>

<table border="1" cellpadding="5" cellspacing="0">
    <tr>
        <th>ID</th>
        <th>Type</th>
        <th>Title</th>
        <th>Destination / Story</th>
        <th>Description</th>
        <th>Photos</th>
        <th>Actions</th>
    </tr>
    {% for u in updates %}
    <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.type }}</td>
        <td>{{ u.title }}</td>
        <td>
            {% if u.type == 'news' %}
                {{ u.story }}
            {% else %}
                {{ u.destination }}
            {% endif %}
        </td>
        <td>{{ u.description }}</td>
        <td>
            {% for p in u.photos %}
                <img src="{{ p }}" style="max-width:100px; margin:2px;">
            {% endfor %}
        </td>
        <td>
            <form method="POST" action="{{ url_for('updates.delete_update', update_id=u.id) }}">
                <button type="submit" onclick="return confirm('Delete this update?')">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
